<ion-content fullscreen>
  <ng-container *ngIf="paquete as p">

    <div class="container mt-3">

      <!-- Galería de Imágenes -->
      <div *ngIf="p.imagenes?.length" class="image-gallery">
        <div class="image-item" *ngFor="let img of p.imagenes">
          <img [src]="img" alt="Imagen del paquete" class="gallery-img">
        </div>
      </div>

      <!-- Info del paquete -->
      <div class="card mt-4">
        <div class="card-header">
          <h5 class="card-title mb-0">{{ p.nombre }}</h5>
          <small class="text-muted">Ubicación: {{ p.ubicacion }}</small>
        </div>
        <div class="card-body">
          <p><strong>Descripción:</strong> {{ p.descripcion }}</p>
          <p><strong>Precio:</strong> ${{ p.precio }}</p>
          <p><strong>Calificación:</strong> {{ p.calificacion }}</p>
          <p><strong>Origen:</strong> {{ p.origen }}</p>
          <p><strong>Destino:</strong> {{ p.destino }}</p>
          <p><strong>Tipo de viaje:</strong> {{ p.tipo }}</p>
          <p><strong>Clase:</strong> {{ p.clase }}</p>
          <p><strong>Máx. pasajeros:</strong> {{ p.maxPasajeros }}</p>
        </div>
      </div>

      <!-- Botón Reservar -->
      <div class="mt-3">
        <ion-button color="success" [routerLink]="['/tabs/reservas']" [queryParams]="{ paqueteId: p._id }">
          Reservar este Paquete
        </ion-button>
      </div>

      <!-- Formulario de reseña -->
      <div *ngIf="token" class="mt-4">
        <label for="comentario" class="form-label">Tu reseña</label>
        <textarea id="comentario" [(ngModel)]="comentario" class="form-control" rows="3" placeholder="Escribe tu comentario"></textarea>

        <label for="calificacion" class="form-label mt-3">Calificación</label>
        <select id="calificacion" [(ngModel)]="calificacion" class="form-select">
          <option *ngFor="let n of [1,2,3,4,5]" [value]="n">{{n}}</option>
        </select>

        <button class="btn btn-primary mt-3" (click)="enviarResena()">Enviar reseña</button>
      </div>

      <!-- Lista de reseñas -->
      <div *ngIf="p.resenas?.length" class="mt-5">
        <h5>Reseñas</h5>
        <ul class="list-group">
          <li class="list-group-item" *ngFor="let r of p.resenas">
            <p class="mb-1">{{ r.comentario }}</p>
            <small class="text-muted">Calificación: {{ r.calificacion }}/5</small>
          </li>
        </ul>
      </div>

    </div>

  </ng-container>
</ion-content>
