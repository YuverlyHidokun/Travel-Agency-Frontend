import{B as Me,a as he,c as we,i as be,j as ye,k as Pe,l as ve,m as _e,r as Ce,s as Ee,w as Le,x as xe,y as ke}from"./chunk-H73HDHKZ.js";import{a as Se}from"./chunk-BZW6RTSU.js";import{$ as M,Aa as se,D as Z,Ea as le,F as V,G as u,H as g,I as ee,N as D,O as te,W as w,_ as k,aa as S,ca as ne,j as Q,nb as ce,oa as re,ob as de,pb as ue,qb as me,ra as ie,rb as pe,ua as oe,x as X,xb as ge,y as v,yb as fe,z as A,za as ae}from"./chunk-Q3SEP6DO.js";import"./chunk-SC7NNYP7.js";import"./chunk-7KGURMOZ.js";import"./chunk-NQVRKVPL.js";import"./chunk-NTF5CPGF.js";import"./chunk-DLTAMAIO.js";import"./chunk-K6FI7DQH.js";import"./chunk-TLQMGTG2.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{e as l}from"./chunk-FP7EQKGB.js";var I=function(o){return o.Unimplemented="UNIMPLEMENTED",o.Unavailable="UNAVAILABLE",o}(I||{}),_=class extends Error{constructor(e,n,i){super(e),this.message=e,this.code=n,this.data=i}},Fe=o=>{var e,n;return o?.androidBridge?"android":!((n=(e=o?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},je=o=>{let e=o.CapacitorCustomPlatform||null,n=o.Capacitor||{},i=n.Plugins=n.Plugins||{},t=()=>e!==null?e.name:Fe(o),r=()=>t()!=="web",s=d=>{let m=p.get(d);return!!(m?.platforms.has(t())||a(d))},a=d=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(j=>j.name===d)},c=d=>o.console.error(d),p=new Map,U=(d,m={})=>{let j=p.get(d);if(j)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),j.proxy;let x=t(),O=a(d),P,Ae=()=>l(void 0,null,function*(){return!P&&x in m?P=typeof m[x]=="function"?P=yield m[x]():P=m[x]:e!==null&&!P&&"web"in m&&(P=typeof m.web=="function"?P=yield m.web():P=m.web),P}),Ie=(f,h)=>{var y,C;if(O){let E=O?.methods.find(b=>h===b.name);if(E)return E.rtype==="promise"?b=>n.nativePromise(d,h.toString(),b):(b,W)=>n.nativeCallback(d,h.toString(),b,W);if(f)return(y=f[h])===null||y===void 0?void 0:y.bind(f)}else{if(f)return(C=f[h])===null||C===void 0?void 0:C.bind(f);throw new _(`"${d}" plugin is not implemented on ${x}`,I.Unimplemented)}},$=f=>{let h,y=(...C)=>{let E=Ae().then(b=>{let W=Ie(b,f);if(W){let q=W(...C);return h=q?.remove,q}else throw new _(`"${d}.${f}()" is not implemented on ${x}`,I.Unimplemented)});return f==="addListener"&&(E.remove=()=>l(void 0,null,function*(){return h()})),E};return y.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(y,"name",{value:f,writable:!1,configurable:!1}),y},Y=$("addListener"),N=$("removeListener"),Te=(f,h)=>{let y=Y({eventName:f},h),C=()=>l(void 0,null,function*(){let b=yield y;N({eventName:f,callbackId:b},h)}),E=new Promise(b=>y.then(()=>b({remove:C})));return E.remove=()=>l(void 0,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield C()}),E},H=new Proxy({},{get(f,h){switch(h){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return O?Te:Y;case"removeListener":return N;default:return $(h)}}});return i[d]=H,p.set(d,{name:d,proxy:H,platforms:new Set([...Object.keys(m),...O?[x]:[]])}),H};return n.convertFileSrc||(n.convertFileSrc=d=>d),n.getPlatform=t,n.handleError=c,n.isNativePlatform=r,n.isPluginAvailable=s,n.registerPlugin=U,n.Exception=_,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},We=o=>o.Capacitor=je(o),G=We(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),B=G.registerPlugin,R=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(n);let r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),i&&this.sendRetainedArgumentsForEvent(e);let s=()=>l(this,null,function*(){return this.removeListener(e,n)});return Promise.resolve({remove:s})}removeAllListeners(){return l(this,null,function*(){this.listeners={};for(let e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}})}notifyListeners(e,n,i){let t=this.listeners[e];if(!t){if(i){let r=this.retainedEventArguments[e];r||(r=[]),r.push(n),this.retainedEventArguments[e]=r}return}t.forEach(r=>r(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:i=>{this.notifyListeners(n,i)}}}unimplemented(e="not implemented"){return new G.Exception(e,I.Unimplemented)}unavailable(e="not available"){return new G.Exception(e,I.Unavailable)}removeListener(e,n){return l(this,null,function*(){let i=this.listeners[e];if(!i)return;let t=i.indexOf(n);this.listeners[e].splice(t,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])})}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){let n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(i=>{this.notifyListeners(e,i)}))}};var Ue=o=>encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Oe=o=>o.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),K=class extends R{getCookies(){return l(this,null,function*(){let e=document.cookie,n={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[t,r]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");t=Oe(t).trim(),r=Oe(r).trim(),n[t]=r}),n})}setCookie(e){return l(this,null,function*(){try{let n=Ue(e.key),i=Ue(e.value),t=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),s=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${i||""}${t}; path=${r}; ${s};`}catch(n){return Promise.reject(n)}})}deleteCookie(e){return l(this,null,function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}})}clearCookies(){return l(this,null,function*(){try{let e=document.cookie.split(";")||[];for(let n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})}clearAllCookies(){return l(this,null,function*(){try{yield this.clearCookies()}catch(e){return Promise.reject(e)}})}},Ve=B("CapacitorCookies",{web:()=>new K}),qe=o=>l(void 0,null,function*(){return new Promise((e,n)=>{let i=new FileReader;i.onload=()=>{let t=i.result;e(t.indexOf(",")>=0?t.split(",")[1]:t)},i.onerror=t=>n(t),i.readAsDataURL(o)})}),De=(o={})=>{let e=Object.keys(o);return Object.keys(o).map(t=>t.toLocaleLowerCase()).reduce((t,r,s)=>(t[r]=o[e[s]],t),{})},Be=(o,e=!0)=>o?Object.entries(o).reduce((i,t)=>{let[r,s]=t,a,c;return Array.isArray(s)?(c="",s.forEach(p=>{a=e?encodeURIComponent(p):p,c+=`${r}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(s):s,c=`${r}=${a}`),`${i}&${c}`},"").substr(1):null,$e=(o,e={})=>{let n=Object.assign({method:o.method||"GET",headers:o.headers},e),t=De(o.headers)["content-type"]||"";if(typeof o.data=="string")n.body=o.data;else if(t.includes("application/x-www-form-urlencoded")){let r=new URLSearchParams;for(let[s,a]of Object.entries(o.data||{}))r.set(s,a);n.body=r.toString()}else if(t.includes("multipart/form-data")||o.data instanceof FormData){let r=new FormData;if(o.data instanceof FormData)o.data.forEach((a,c)=>{r.append(c,a)});else for(let a of Object.keys(o.data))r.append(a,o.data[a]);n.body=r;let s=new Headers(n.headers);s.delete("content-type"),n.headers=s}else(t.includes("application/json")||typeof o.data=="object")&&(n.body=JSON.stringify(o.data));return n},z=class extends R{request(e){return l(this,null,function*(){let n=$e(e,e.webFetchExtra),i=Be(e.params,e.shouldEncodeUrlParams),t=i?`${e.url}?${i}`:e.url,r=yield fetch(t,n),s=r.headers.get("content-type")||"",{responseType:a="text"}=r.ok?e:{};s.includes("application/json")&&(a="json");let c,p;switch(a){case"arraybuffer":case"blob":p=yield r.blob(),c=yield qe(p);break;case"json":c=yield r.json();break;case"document":case"text":default:c=yield r.text()}let U={};return r.headers.forEach((d,m)=>{U[m]=d}),{data:c,headers:U,status:r.status,url:r.url}})}get(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))})}post(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))})}put(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))})}patch(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})}delete(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})}},Ge=B("CapacitorHttp",{web:()=>new z});var L=function(o){return o.Prompt="PROMPT",o.Camera="CAMERA",o.Photos="PHOTOS",o}(L||{}),T=function(o){return o.Rear="REAR",o.Front="FRONT",o}(T||{}),J=function(o){return o.Uri="uri",o.Base64="base64",o.DataUrl="dataUrl",o}(J||{});var F=class extends R{getPhoto(e){return l(this,null,function*(){return new Promise((n,i)=>l(this,null,function*(){if(e.webUseInput||e.source===L.Photos)this.fileInputExperience(e,n,i);else if(e.source===L.Prompt){let t=document.querySelector("pwa-action-sheet");t||(t=document.createElement("pwa-action-sheet"),document.body.appendChild(t)),t.header=e.promptLabelHeader||"Photo",t.cancelable=!1,t.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],t.addEventListener("onSelection",r=>l(this,null,function*(){r.detail===0?this.fileInputExperience(e,n,i):this.cameraExperience(e,n,i)}))}else this.cameraExperience(e,n,i)}))})}pickImages(e){return l(this,null,function*(){return new Promise((n,i)=>l(this,null,function*(){this.multipleFileInputExperience(n,i)}))})}cameraExperience(e,n,i){return l(this,null,function*(){if(customElements.get("pwa-camera-modal")){let t=document.createElement("pwa-camera-modal");t.facingMode=e.direction===T.Front?"user":"environment",document.body.appendChild(t);try{yield t.componentOnReady(),t.addEventListener("onPhoto",r=>l(this,null,function*(){let s=r.detail;s===null?i(new _("User cancelled photos app")):s instanceof Error?i(s):n(yield this._getCameraPhoto(s,e)),t.dismiss(),document.body.removeChild(t)})),t.present()}catch{this.fileInputExperience(e,n,i)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,n,i)})}fileInputExperience(e,n,i){let t=document.querySelector("#_capacitor-camera-input"),r=()=>{var s;(s=t.parentNode)===null||s===void 0||s.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input",t.type="file",t.hidden=!0,document.body.appendChild(t),t.addEventListener("change",s=>{let a=t.files[0],c="jpeg";if(a.type==="image/png"?c="png":a.type==="image/gif"&&(c="gif"),e.resultType==="dataUrl"||e.resultType==="base64"){let p=new FileReader;p.addEventListener("load",()=>{if(e.resultType==="dataUrl")n({dataUrl:p.result,format:c});else if(e.resultType==="base64"){let U=p.result.split(",")[1];n({base64String:U,format:c})}r()}),p.readAsDataURL(a)}else n({webPath:URL.createObjectURL(a),format:c}),r()}),t.addEventListener("cancel",s=>{i(new _("User cancelled photos app")),r()})),t.accept="image/*",t.capture=!0,e.source===L.Photos||e.source===L.Prompt?t.removeAttribute("capture"):e.direction===T.Front?t.capture="user":e.direction===T.Rear&&(t.capture="environment"),t.click()}multipleFileInputExperience(e,n){let i=document.querySelector("#_capacitor-camera-input-multiple"),t=()=>{var r;(r=i.parentNode)===null||r===void 0||r.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input-multiple",i.type="file",i.hidden=!0,i.multiple=!0,document.body.appendChild(i),i.addEventListener("change",r=>{let s=[];for(let a=0;a<i.files.length;a++){let c=i.files[a],p="jpeg";c.type==="image/png"?p="png":c.type==="image/gif"&&(p="gif"),s.push({webPath:URL.createObjectURL(c),format:p})}e({photos:s}),t()}),i.addEventListener("cancel",r=>{n(new _("User cancelled photos app")),t()})),i.accept="image/*",i.click()}_getCameraPhoto(e,n){return new Promise((i,t)=>{let r=new FileReader,s=e.type.split("/")[1];n.resultType==="uri"?i({webPath:URL.createObjectURL(e),format:s,saved:!1}):(r.readAsDataURL(e),r.onloadend=()=>{let a=r.result;n.resultType==="dataUrl"?i({dataUrl:a,format:s,saved:!1}):i({base64String:a.split(",")[1],format:s,saved:!1})},r.onerror=a=>{t(a)})})}checkPermissions(){return l(this,null,function*(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}})}requestPermissions(){return l(this,null,function*(){throw this.unimplemented("Not implemented on web.")})}pickLimitedLibraryPhotos(){return l(this,null,function*(){throw this.unavailable("Not implemented on web.")})}getLimitedLibraryPhotos(){return l(this,null,function*(){throw this.unavailable("Not implemented on web.")})}},Qe=new F;var Re=B("Camera",{web:()=>new F});function He(o,e){if(o&1&&(u(0,"ion-avatar",19),ee(1,"img",20),g()),o&2){let n=te();v(),V("src",n.imagenPreview,X)}}var ht=(()=>{let e=class e{constructor(i,t,r,s){this.http=i,this.router=t,this.toastCtrl=r,this.loadingCtrl=s,this.nombre="",this.apellido="",this.numero="",this.email="",this.password="",this.acepta_terminos=!1,this.fotoPerfil=null,this.imagenPreview=null,this.backendUrl=`${Se}/travel/usuarios/registro`}seleccionarFoto(){return l(this,null,function*(){try{let i=yield Re.getPhoto({quality:90,allowEditing:!1,resultType:J.DataUrl,source:L.Photos});if(i?.dataUrl){this.imagenPreview=i.dataUrl;let t=yield(yield fetch(i.dataUrl)).blob();this.fotoPerfil=new File([t],"fotoPerfil.jpg",{type:t.type})}}catch(i){console.error("Error al seleccionar imagen:",i)}})}registrar(){return l(this,null,function*(){if(!this.acepta_terminos){yield(yield this.toastCtrl.create({message:"Debes aceptar los t\xE9rminos y condiciones.",duration:3e3,color:"danger"})).present();return}let i=yield this.loadingCtrl.create({message:"Registrando usuario..."});yield i.present();let t=new FormData;t.append("nombre",this.nombre),t.append("apellido",this.apellido),t.append("numero",this.numero),t.append("email",this.email),t.append("password",this.password),t.append("acepta_terminos",String(this.acepta_terminos)),this.fotoPerfil&&t.append("imagen",this.fotoPerfil),this.http.post(this.backendUrl,t).subscribe({next:r=>l(this,null,function*(){yield i.dismiss(),yield(yield this.toastCtrl.create({message:r.msg||"Registro exitoso",duration:3e3,color:"success"})).present(),this.router.navigate(["/login"])}),error:r=>l(this,null,function*(){yield i.dismiss(),yield(yield this.toastCtrl.create({message:r.error?.msg||"Error al registrar",duration:3e3,color:"danger"})).present()})})})}irATerminos(){this.router.navigate(["/terminos"])}};e.\u0275fac=function(t){return new(t||e)(A(oe),A(ae),A(xe),A(Le))},e.\u0275cmp=Q({type:e,selectors:[["app-register"]],standalone:!0,features:[ne],decls:41,vars:7,consts:[["color","primary"],[1,"ion-padding"],[3,"submit"],["lines","inset"],["position","floating"],["name","nombre","required","",3,"ngModelChange","ngModel"],["name","apellido","required","",3,"ngModelChange","ngModel"],["type","tel","name","numero","required","",3,"ngModelChange","ngModel"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],[1,"ion-text-center","ion-margin-top"],["class","ion-margin-bottom","style","margin: auto;",4,"ngIf"],["expand","block","fill","outline",3,"click"],["lines","none",1,"ion-margin-top"],["slot","start","name","terminos",3,"ngModelChange","ngModel"],[1,"ion-text-wrap"],[2,"color","var(--ion-color-primary)","text-decoration","underline",3,"click"],["expand","block","type","submit",1,"ion-margin-top"],["expand","block","fill","clear","routerLink","/login"],[1,"ion-margin-bottom",2,"margin","auto"],["alt","Foto de perfil",3,"src"]],template:function(t,r){t&1&&(u(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),w(3,"Crear una cuenta"),g()()(),u(4,"ion-content",1)(5,"form",2),D("submit",function(){return r.registrar()}),u(6,"ion-list",3)(7,"ion-item")(8,"ion-label",4),w(9,"Nombre"),g(),u(10,"ion-input",5),S("ngModelChange",function(a){return M(r.nombre,a)||(r.nombre=a),a}),g()(),u(11,"ion-item")(12,"ion-label",4),w(13,"Apellido"),g(),u(14,"ion-input",6),S("ngModelChange",function(a){return M(r.apellido,a)||(r.apellido=a),a}),g()(),u(15,"ion-item")(16,"ion-label",4),w(17,"N\xFAmero"),g(),u(18,"ion-input",7),S("ngModelChange",function(a){return M(r.numero,a)||(r.numero=a),a}),g()(),u(19,"ion-item")(20,"ion-label",4),w(21,"Correo electr\xF3nico"),g(),u(22,"ion-input",8),S("ngModelChange",function(a){return M(r.email,a)||(r.email=a),a}),g()(),u(23,"ion-item")(24,"ion-label",4),w(25,"Contrase\xF1a"),g(),u(26,"ion-input",9),S("ngModelChange",function(a){return M(r.password,a)||(r.password=a),a}),g()()(),u(27,"div",10),Z(28,He,2,1,"ion-avatar",11),u(29,"ion-button",12),D("click",function(){return r.seleccionarFoto()}),w(30," Seleccionar foto de perfil "),g()(),u(31,"ion-item",13)(32,"ion-checkbox",14),S("ngModelChange",function(a){return M(r.acepta_terminos,a)||(r.acepta_terminos=a),a}),g(),u(33,"ion-label",15),w(34," Acepto los "),u(35,"a",16),D("click",function(){return r.irATerminos()}),w(36," t\xE9rminos y condiciones "),g()()(),u(37,"ion-button",17),w(38," Registrarme "),g(),u(39,"ion-button",18),w(40," Ya tengo una cuenta "),g()()()),t&2&&(v(10),k("ngModel",r.nombre),v(4),k("ngModel",r.apellido),v(4),k("ngModel",r.numero),v(4),k("ngModel",r.email),v(4),k("ngModel",r.password),v(2),V("ngIf",r.imagenPreview),v(4),k("ngModel",r.acepta_terminos))},dependencies:[ie,re,fe,pe,ce,de,ge,me,ue,le,se,ye,Ee,Ce,be,Pe,ve,Me,ke,we,he,_e],styles:["ion-content[_ngcontent-%COMP%]{--background: #FFF5E4}ion-list[_ngcontent-%COMP%]{background:transparent}ion-item[_ngcontent-%COMP%]{--background: #f9f9f9;--border-radius: var(--ion-border-radius);--padding-start: 12px;--inner-padding-end: 12px;margin-top:12px;border:1px solid #ddd;border-radius:12px;box-shadow:0 2px 6px #0000000d}ion-label[_ngcontent-%COMP%]{color:#333;font-weight:500}ion-input[_ngcontent-%COMP%]{--color: #333}ion-avatar[_ngcontent-%COMP%]{width:100px;height:100px;border:2px solid var(--ion-color-primary);box-shadow:0 4px 12px #0000001a;margin-bottom:8px}ion-button[_ngcontent-%COMP%]{--border-radius: 16px;font-weight:600;letter-spacing:.5px}ion-button[fill=outline][_ngcontent-%COMP%]{--color: var(--ion-color-secondary);border:1.5px solid var(--ion-color-secondary)}ion-button[fill=clear][_ngcontent-%COMP%]{color:var(--ion-color-primary);text-decoration:underline;font-size:14px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}a[_ngcontent-%COMP%]{color:var(--ion-color-primary);text-decoration:underline;font-weight:500}ion-checkbox[_ngcontent-%COMP%]{--checkbox-background-checked: var(--ion-color-primary)}"]});let o=e;return o})();export{ht as RegisterPage};
