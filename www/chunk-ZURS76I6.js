import{B as z,C as H,D as N,c as T,i as j,j as v,k as F,l as O,n as L,r as B,s as k,w as D,x as A}from"./chunk-H73HDHKZ.js";import{a as h}from"./chunk-BZW6RTSU.js";import{$ as p,G as n,H as o,N as b,W as a,Y as f,_ as d,aa as c,ca as y,j as C,nb as I,qb as E,ra as M,sa as w,ua as S,xa as q,xb as x,y as l,yb as W,z as g}from"./chunk-Q3SEP6DO.js";import"./chunk-SC7NNYP7.js";import"./chunk-7KGURMOZ.js";import"./chunk-NQVRKVPL.js";import"./chunk-NTF5CPGF.js";import"./chunk-DLTAMAIO.js";import"./chunk-K6FI7DQH.js";import"./chunk-TLQMGTG2.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{e as u}from"./chunk-FP7EQKGB.js";var $=(()=>{let m=class m{constructor(r,t,i,s){this.http=r,this.toastCtrl=t,this.loadingCtrl=i,this.route=s,this.nombre="",this.descripcion="",this.precio=null,this.ubicacion="",this.origen="",this.destino="",this.tipo="ida",this.clase="economica",this.maxPasajeros=null,this.imagenes=[],this.paqueteId=null}onFileChange(r){let t=r.target.files;if(t.length>5){this.showToast("Solo puedes subir hasta 5 im\xE1genes");return}this.imagenes=Array.from(t)}ngOnInit(){this.route.queryParams.subscribe(r=>{r.id&&(this.paqueteId=r.id,this.paqueteId&&this.cargarDatosPaquete(this.paqueteId))})}cargarDatosPaquete(r){this.http.get(`${h}/travel/paquetes/${r}`).subscribe({next:t=>{this.nombre=t.nombre,this.descripcion=t.descripcion,this.precio=t.precio,this.ubicacion=t.ubicacion,this.origen=t.origen,this.destino=t.destino,this.tipo=t.tipo,this.clase=t.clase,this.maxPasajeros=t.maxPasajeros},error:t=>{console.error("Error cargando paquete:",t),this.showToast("Error al cargar paquete")}})}resetForm(){this.nombre="",this.descripcion="",this.precio=null,this.ubicacion="",this.origen="",this.destino="",this.tipo="ida",this.clase="economica",this.maxPasajeros=null,this.imagenes=[]}showToast(r,t="danger"){return u(this,null,function*(){(yield this.toastCtrl.create({message:r,duration:3e3,color:t})).present()})}guardarPaquete(){return u(this,null,function*(){if(!this.nombre||!this.descripcion||!this.precio||!this.ubicacion||!this.origen||!this.destino||!this.maxPasajeros){this.showToast("Por favor completa todos los campos requeridos");return}let r=yield this.loadingCtrl.create({message:this.paqueteId?"Actualizando...":"Creando paquete..."});yield r.present();let t=new FormData;t.append("nombre",this.nombre),t.append("descripcion",this.descripcion),t.append("precio",this.precio.toString()),t.append("ubicacion",this.ubicacion),t.append("origen",this.origen),t.append("destino",this.destino),t.append("tipo",this.tipo),t.append("clase",this.clase),t.append("maxPasajeros",this.maxPasajeros.toString()),this.imagenes.forEach(P=>t.append("imagen",P));let i=localStorage.getItem("token"),s=new w().set("Authorization",`Bearer ${i}`);(this.paqueteId?this.http.put(`${h}/travel/paquetes/${this.paqueteId}`,t,{headers:s}):this.http.post(`${h}/travel/paquetes/`,t,{headers:s})).subscribe({next:()=>u(this,null,function*(){yield r.dismiss(),this.showToast(this.paqueteId?"Paquete actualizado":"Paquete creado correctamente","success"),this.paqueteId||this.resetForm()}),error:P=>u(this,null,function*(){yield r.dismiss(),this.showToast("Error al guardar paquete"),console.error(P)})})})}};m.\u0275fac=function(t){return new(t||m)(g(S),g(A),g(D),g(q))},m.\u0275cmp=C({type:m,selectors:[["app-crear-paquete"]],standalone:!0,features:[y],decls:55,vars:10,consts:[["color","primary"],[1,"ion-padding"],["position","stacked"],["required","",3,"ngModelChange","ngModel"],["type","number","required","",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","ida"],["value","ida-vuelta"],["value","economica"],["value","premium"],["type","file","multiple","","accept","image/*",3,"change"],["expand","full",3,"click"]],template:function(t,i){t&1&&(n(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),a(3,"Crear Paquete"),o()()(),n(4,"ion-content",1)(5,"ion-item")(6,"ion-label",2),a(7,"Nombre"),o(),n(8,"ion-input",3),c("ngModelChange",function(e){return p(i.nombre,e)||(i.nombre=e),e}),o()(),n(9,"ion-item")(10,"ion-label",2),a(11,"Descripci\xF3n"),o(),n(12,"ion-textarea",3),c("ngModelChange",function(e){return p(i.descripcion,e)||(i.descripcion=e),e}),o()(),n(13,"ion-item")(14,"ion-label",2),a(15,"Precio"),o(),n(16,"ion-input",4),c("ngModelChange",function(e){return p(i.precio,e)||(i.precio=e),e}),o()(),n(17,"ion-item")(18,"ion-label",2),a(19,"Ubicaci\xF3n"),o(),n(20,"ion-input",3),c("ngModelChange",function(e){return p(i.ubicacion,e)||(i.ubicacion=e),e}),o()(),n(21,"ion-item")(22,"ion-label",2),a(23,"Origen"),o(),n(24,"ion-input",3),c("ngModelChange",function(e){return p(i.origen,e)||(i.origen=e),e}),o()(),n(25,"ion-item")(26,"ion-label",2),a(27,"Destino"),o(),n(28,"ion-input",3),c("ngModelChange",function(e){return p(i.destino,e)||(i.destino=e),e}),o()(),n(29,"ion-item")(30,"ion-label",2),a(31,"Tipo"),o(),n(32,"ion-select",5),c("ngModelChange",function(e){return p(i.tipo,e)||(i.tipo=e),e}),n(33,"ion-select-option",6),a(34,"Solo Ida"),o(),n(35,"ion-select-option",7),a(36,"Ida y Vuelta"),o()()(),n(37,"ion-item")(38,"ion-label",2),a(39,"Clase"),o(),n(40,"ion-select",5),c("ngModelChange",function(e){return p(i.clase,e)||(i.clase=e),e}),n(41,"ion-select-option",8),a(42,"Econ\xF3mica"),o(),n(43,"ion-select-option",9),a(44,"Premium"),o()()(),n(45,"ion-item")(46,"ion-label",2),a(47,"M\xE1x. Pasajeros"),o(),n(48,"ion-input",4),c("ngModelChange",function(e){return p(i.maxPasajeros,e)||(i.maxPasajeros=e),e}),o()(),n(49,"ion-item")(50,"ion-label",2),a(51,"Im\xE1genes (hasta 5)"),o(),n(52,"input",10),b("change",function(e){return i.onFileChange(e)}),o()(),n(53,"ion-button",11),b("click",function(){return i.guardarPaquete()}),a(54),o()()),t&2&&(l(8),d("ngModel",i.nombre),l(4),d("ngModel",i.descripcion),l(4),d("ngModel",i.precio),l(4),d("ngModel",i.ubicacion),l(4),d("ngModel",i.origen),l(4),d("ngModel",i.destino),l(4),d("ngModel",i.tipo),l(8),d("ngModel",i.clase),l(8),d("ngModel",i.maxPasajeros),l(6),f(" ",i.paqueteId?"Actualizar Paquete":"Crear Paquete"," "))},dependencies:[M,W,I,x,E,j,v,B,k,z,F,O,N,T,H,L],styles:["ion-content[_ngcontent-%COMP%]{--background: #FFF5E4}ion-item[_ngcontent-%COMP%]{--background: #f9f9f9;--border-radius: var(--ion-border-radius);--padding-start: 12px;--inner-padding-end: 12px;margin-top:12px;border:1px solid #ddd;border-radius:12px;box-shadow:0 2px 6px #0000000d;transition:box-shadow .2s ease-in-out}ion-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 10px #00000014}ion-label[_ngcontent-%COMP%]{font-weight:500;color:#333}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{--color: #333}ion-select[_ngcontent-%COMP%]{--placeholder-color: #999}input[type=file][_ngcontent-%COMP%]{margin-top:8px;padding:6px 0;font-size:14px;color:var(--ion-color-primary)}ion-button[_ngcontent-%COMP%]{margin-top:24px;--border-radius: 16px;font-weight:600;letter-spacing:.5px;--background: var(--ion-color-primary);--color: #fff;box-shadow:0 4px 12px #00000026}ion-button[_ngcontent-%COMP%]:hover{filter:brightness(.95)}"]});let _=m;return _})();export{$ as CrearPaquetePage};
